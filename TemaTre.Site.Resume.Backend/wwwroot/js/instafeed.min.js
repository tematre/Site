(function(){var t;t=function(){function t(t,e){var o,i;if(this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",links:!0,mock:!1,useHttp:!1},"object"==typeof t)for(o in t)i=t[o],this.options[o]=i;this.context=null!=e?e:this,this.unique=this._genKey()}return t.prototype.hasNext=function(){return"string"==typeof this.context.nextUrl&&this.context.nextUrl.length>0},t.prototype.next=function(){return!!this.hasNext()&&this.run(this.context.nextUrl)},t.prototype.run=function(e){var o,i,n;if("string"!=typeof this.options.clientId&&"string"!=typeof this.options.accessToken)throw new Error("Missing clientId or accessToken.");if("string"!=typeof this.options.accessToken&&"string"!=typeof this.options.clientId)throw new Error("Missing clientId or accessToken.");return null!=this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),"undefined"!=typeof document&&null!==document&&(n=document.createElement("script"),n.id="instafeed-fetcher",n.src=e||this._buildUrl(),o=document.getElementsByTagName("head"),o[0].appendChild(n),i="instafeedCache"+this.unique,window[i]=new t(this.options,this),window[i].unique=this.unique),!0},t.prototype.parse=function(t){var e,o,i,n,r,s,a,p,l,c,h,u,d,f,m,g,y,w,k,b,_,E,I,x,v,N,B,j,T,C,O,U,q;if("object"!=typeof t){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(200!==t.meta.code){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,t.meta.error_message),!1;throw new Error("Error from Instagram: "+t.meta.error_message)}if(0===t.data.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}if(null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,t),this.context.nextUrl="",null!=t.pagination&&(this.context.nextUrl=t.pagination.next_url),"none"!==this.options.sortBy)switch(O="random"===this.options.sortBy?["","random"]:this.options.sortBy.split("-"),C="least"===O[0],O[1]){case"random":t.data.sort(function(){return.5-Math.random()});break;case"recent":t.data=this._sortBy(t.data,"created_time",C);break;case"liked":t.data=this._sortBy(t.data,"likes.count",C);break;case"commented":t.data=this._sortBy(t.data,"comments.count",C);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}if("undefined"!=typeof document&&null!==document&&this.options.mock===!1){if(g=t.data,T=parseInt(this.options.limit,10),null!=this.options.limit&&g.length>T&&(g=g.slice(0,T)),a=document.createDocumentFragment(),null!=this.options.filter&&"function"==typeof this.options.filter&&(g=this._filter(g,this.options.filter)),null!=this.options.template&&"string"==typeof this.options.template){for(l="",f="",b="",q=document.createElement("div"),h=0,v=g.length;h<v;h++){if(u=g[h],d=u.images[this.options.resolution],"object"!=typeof d)throw s="No image found for resolution: "+this.options.resolution+".",new Error(s);_=d.width,w=d.height,k="square",_>w&&(k="landscape"),_<w&&(k="portrait"),m=d.url,c=window.location.protocol.indexOf("http")>=0,c&&!this.options.useHttp&&(m=m.replace(/https?:\/\//,"//")),f=this._makeTemplate(this.options.template,{model:u,id:u.id,link:u.link,type:u.type,image:m,width:_,height:w,orientation:k,caption:this._getObjectProperty(u,"caption.text"),likes:u.likes.count,comments:u.comments.count,location:this._getObjectProperty(u,"location.name")}),l+=f}for(q.innerHTML=l,n=[],i=0,o=q.childNodes.length;i<o;)n.push(q.childNodes[i]),i+=1;for(I=0,N=n.length;I<N;I++)j=n[I],a.appendChild(j)}else for(x=0,B=g.length;x<B;x++){if(u=g[x],y=document.createElement("img"),d=u.images[this.options.resolution],"object"!=typeof d)throw s="No image found for resolution: "+this.options.resolution+".",new Error(s);m=d.url,c=window.location.protocol.indexOf("http")>=0,c&&!this.options.useHttp&&(m=m.replace(/https?:\/\//,"//")),y.src=m,this.options.links===!0?(e=document.createElement("a"),e.href=u.link,e.appendChild(y),a.appendChild(e)):a.appendChild(y)}if(U=this.options.target,"string"==typeof U&&(U=document.getElementById(U)),null==U)throw s='No element with id="'+this.options.target+'" on page.',new Error(s);U.appendChild(a),p=document.getElementsByTagName("head")[0],p.removeChild(document.getElementById("instafeed-fetcher")),E="instafeedCache"+this.unique,window[E]=void 0;try{delete window[E]}catch(P){r=P}}return null!=this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this),!0},t.prototype._buildUrl=function(){var t,e,o;switch(t="https://api.instagram.com/v1",this.options.get){case"popular":e="media/popular";break;case"tagged":if(!this.options.tagName)throw new Error("No tag name specified. Use the 'tagName' option.");e="tags/"+this.options.tagName+"/media/recent";break;case"location":if(!this.options.locationId)throw new Error("No location specified. Use the 'locationId' option.");e="locations/"+this.options.locationId+"/media/recent";break;case"user":if(!this.options.userId)throw new Error("No user specified. Use the 'userId' option.");e="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return o=t+"/"+e,o+=null!=this.options.accessToken?"?access_token="+this.options.accessToken:"?client_id="+this.options.clientId,null!=this.options.limit&&(o+="&count="+this.options.limit),o+="&callback=instafeedCache"+this.unique+".parse"},t.prototype._genKey=function(){var t;return t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},""+t()+t()+t()+t()},t.prototype._makeTemplate=function(t,e){var o,i,n,r,s;for(i=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,o=t;i.test(o);)r=o.match(i)[1],s=null!=(n=this._getObjectProperty(e,r))?n:"",o=o.replace(i,function(){return""+s});return o},t.prototype._getObjectProperty=function(t,e){var o,i;for(e=e.replace(/\[(\w+)\]/g,".$1"),i=e.split(".");i.length;){if(o=i.shift(),!(null!=t&&o in t))return null;t=t[o]}return t},t.prototype._sortBy=function(t,e,o){var i;return i=function(t,i){var n,r;return n=this._getObjectProperty(t,e),r=this._getObjectProperty(i,e),o?n>r?1:-1:n<r?1:-1},t.sort(i.bind(this)),t},t.prototype._filter=function(t,e){var o,i,n,r,s;for(o=[],i=function(t){if(e(t))return o.push(t)},n=0,s=t.length;n<s;n++)r=t[n],i(r);return o},t}(),function(t,e){return"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Instafeed=e()}(this,function(){return t})}).call(this);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluc3RhZmVlZC5taW4uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInRoaXMiLCJvcHRpb25zIiwidGFyZ2V0IiwiZ2V0IiwicmVzb2x1dGlvbiIsInNvcnRCeSIsImxpbmtzIiwibW9jayIsInVzZUh0dHAiLCJjb250ZXh0IiwidW5pcXVlIiwiX2dlbktleSIsInByb3RvdHlwZSIsImhhc05leHQiLCJuZXh0VXJsIiwibGVuZ3RoIiwibmV4dCIsInJ1biIsImkiLCJjbGllbnRJZCIsImFjY2Vzc1Rva2VuIiwiRXJyb3IiLCJiZWZvcmUiLCJjYWxsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJzcmMiLCJfYnVpbGRVcmwiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImFwcGVuZENoaWxkIiwid2luZG93IiwicGFyc2UiLCJzIiwibyIsInUiLCJhIiwiZiIsImwiLCJjIiwiaCIsInAiLCJkIiwidiIsIm0iLCJnIiwieSIsImIiLCJ3IiwiRSIsIlMiLCJ4IiwiVCIsIk4iLCJDIiwiayIsIkwiLCJBIiwiTyIsIk0iLCJfIiwiRCIsImVycm9yIiwibWV0YSIsImNvZGUiLCJlcnJvcl9tZXNzYWdlIiwiZGF0YSIsInN1Y2Nlc3MiLCJwYWdpbmF0aW9uIiwibmV4dF91cmwiLCJzcGxpdCIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwiX3NvcnRCeSIsInBhcnNlSW50IiwibGltaXQiLCJzbGljZSIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJmaWx0ZXIiLCJfZmlsdGVyIiwidGVtcGxhdGUiLCJpbWFnZXMiLCJ3aWR0aCIsImhlaWdodCIsInVybCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJpbmRleE9mIiwicmVwbGFjZSIsIl9tYWtlVGVtcGxhdGUiLCJtb2RlbCIsImxpbmsiLCJ0eXBlIiwiaW1hZ2UiLCJvcmllbnRhdGlvbiIsImNhcHRpb24iLCJfZ2V0T2JqZWN0UHJvcGVydHkiLCJsaWtlcyIsImNvdW50IiwiY29tbWVudHMiLCJpbm5lckhUTUwiLCJjaGlsZE5vZGVzIiwicHVzaCIsImhyZWYiLCJnZXRFbGVtZW50QnlJZCIsInJlbW92ZUNoaWxkIiwiUCIsImFmdGVyIiwidGFnTmFtZSIsImxvY2F0aW9uSWQiLCJ1c2VySWQiLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsInRlc3QiLCJtYXRjaCIsInNoaWZ0IiwiYmluZCIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJJbnN0YWZlZWQiXSwibWFwcGluZ3MiOiJDQUNBLFdBQVksR0FBSUEsRUFBRUEsR0FBRSxXQUFXLFFBQVNBLEdBQUVBLEVBQUVDLEdBQUcsR0FBSUMsR0FBRUMsQ0FBbUgsSUFBakhDLEtBQUtDLFNBQVNDLE9BQU8sWUFBWUMsSUFBSSxVQUFVQyxXQUFXLFlBQVlDLE9BQU8sT0FBT0MsT0FBTSxFQUFHQyxNQUFLLEVBQUdDLFNBQVEsR0FBaUIsZ0JBQUhaLEdBQVksSUFBSUUsSUFBS0YsR0FBRUcsRUFBRUgsRUFBRUUsR0FBR0UsS0FBS0MsUUFBUUgsR0FBR0MsQ0FBRUMsTUFBS1MsUUFBVyxNQUFIWixFQUFRQSxFQUFFRyxLQUFLQSxLQUFLVSxPQUFPVixLQUFLVyxVQUFVLE1BQU9mLEdBQUVnQixVQUFVQyxRQUFRLFdBQVcsTUFBb0MsZ0JBQXRCYixNQUFLUyxRQUFRSyxTQUFtQmQsS0FBS1MsUUFBUUssUUFBUUMsT0FBTyxHQUFHbkIsRUFBRWdCLFVBQVVJLEtBQUssV0FBVyxRQUFPaEIsS0FBS2EsV0FBVWIsS0FBS2lCLElBQUlqQixLQUFLUyxRQUFRSyxVQUFhbEIsRUFBRWdCLFVBQVVLLElBQUksU0FBU3BCLEdBQUcsR0FBSUMsR0FBRUMsRUFBRW1CLENBQUUsSUFBaUMsZ0JBQXZCbEIsTUFBS0MsUUFBUWtCLFVBQXFELGdCQUExQm5CLE1BQUtDLFFBQVFtQixZQUFzQixLQUFNLElBQUlDLE9BQU0sbUNBQW9DLElBQW9DLGdCQUExQnJCLE1BQUtDLFFBQVFtQixhQUFxRCxnQkFBdkJwQixNQUFLQyxRQUFRa0IsU0FBbUIsS0FBTSxJQUFJ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RyxNQUFPRixJQUFHQSxFQUFFZ0IsVUFBVThELFFBQVEsU0FBUzlFLEVBQUVDLEVBQUVDLEdBQUcsR0FBSUMsRUFBRSxPQUFPQSxHQUFFLFNBQVNILEVBQUVHLEdBQUcsR0FBSW1CLEdBQUVlLENBQUUsT0FBT2YsR0FBRWxCLEtBQUtpRyxtQkFBbUJyRyxFQUFFQyxHQUFHb0MsRUFBRWpDLEtBQUtpRyxtQkFBbUJsRyxFQUFFRixHQUFHQyxFQUFFb0IsRUFBRWUsRUFBRSxLQUFLZixFQUFFZSxFQUFFLE1BQU1yQyxFQUFFMkUsS0FBS3hFLEVBQUVzSCxLQUFLckgsT0FBT0osR0FBR0EsRUFBRWdCLFVBQVVvRSxRQUFRLFNBQVNwRixFQUFFQyxHQUFHLEdBQUlDLEdBQUVDLEVBQUVtQixFQUFFZSxFQUFFQyxDQUErQyxLQUE3Q3BDLEtBQUtDLEVBQUUsU0FBU0gsR0FBRyxHQUFHQyxFQUFFRCxHQUFHLE1BQU9FLEdBQUV5RyxLQUFLM0csSUFBUXNCLEVBQUUsRUFBRWdCLEVBQUV0QyxFQUFFbUIsT0FBT0csRUFBRWdCLEVBQUVoQixJQUFJZSxFQUFFckMsRUFBRXNCLEdBQUduQixFQUFFa0MsRUFBRyxPQUFPbkMsSUFBR0YsS0FBSyxTQUFTQSxFQUFFQyxHQUFHLE1BQXNCLGtCQUFSeUgsU0FBb0JBLE9BQU9DLElBQUlELFVBQVV6SCxHQUFrQixnQkFBUjJILFNBQWtCQSxPQUFPQyxRQUFRRCxPQUFPQyxRQUFRNUgsSUFBSUQsRUFBRThILFVBQVU3SCxLQUFLRyxLQUFLLFdBQVcsTUFBT0osT0FBTTJCLEtBQUt2QiIsImZpbGUiOiJpbnN0YWZlZWQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjkuM1xyXG4oZnVuY3Rpb24oKXt2YXIgZTtlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciBuLHI7dGhpcy5vcHRpb25zPXt0YXJnZXQ6XCJpbnN0YWZlZWRcIixnZXQ6XCJwb3B1bGFyXCIscmVzb2x1dGlvbjpcInRodW1ibmFpbFwiLHNvcnRCeTpcIm5vbmVcIixsaW5rczohMCxtb2NrOiExLHVzZUh0dHA6ITF9O2lmKHR5cGVvZiBlPT1cIm9iamVjdFwiKWZvcihuIGluIGUpcj1lW25dLHRoaXMub3B0aW9uc1tuXT1yO3RoaXMuY29udGV4dD10IT1udWxsP3Q6dGhpcyx0aGlzLnVuaXF1ZT10aGlzLl9nZW5LZXkoKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzTmV4dD1mdW5jdGlvbigpe3JldHVybiB0eXBlb2YgdGhpcy5jb250ZXh0Lm5leHRVcmw9PVwic3RyaW5nXCImJnRoaXMuY29udGV4dC5uZXh0VXJsLmxlbmd0aD4wfSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzTmV4dCgpP3RoaXMucnVuKHRoaXMuY29udGV4dC5uZXh0VXJsKTohMX0sZS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKHQpe3ZhciBuLHIsaTtpZih0eXBlb2YgdGhpcy5vcHRpb25zLmNsaWVudElkIT1cInN0cmluZ1wiJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuIT1cInN0cmluZ1wiKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgY2xpZW50SWQgb3IgYWNjZXNzVG9rZW4uXCIpO2lmKHR5cGVvZiB0aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW4hPVwic3RyaW5nXCImJnR5cGVvZiB0aGlzLm9wdGlvbnMuY2xpZW50SWQhPVwic3RyaW5nXCIpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjbGllbnRJZCBvciBhY2Nlc3NUb2tlbi5cIik7cmV0dXJuIHRoaXMub3B0aW9ucy5iZWZvcmUhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuYmVmb3JlPT1cImZ1bmN0aW9uXCImJnRoaXMub3B0aW9ucy5iZWZvcmUuY2FsbCh0aGlzKSx0eXBlb2YgZG9jdW1lbnQhPVwidW5kZWZpbmVkXCImJmRvY3VtZW50IT09bnVsbCYmKGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxpLmlkPVwiaW5zdGFmZWVkLWZldGNoZXJcIixpLnNyYz10fHx0aGlzLl9idWlsZFVybCgpLG49ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpLG5bMF0uYXBwZW5kQ2hpbGQoaSkscj1cImluc3RhZmVlZENhY2hlXCIrdGhpcy51bmlxdWUsd2luZG93W3JdPW5ldyBlKHRoaXMub3B0aW9ucyx0aGlzKSx3aW5kb3dbcl0udW5pcXVlPXRoaXMudW5pcXVlKSwhMH0sZS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGkscyxvLHUsYSxmLGwsYyxoLHAsZCx2LG0sZyx5LGIsdyxFLFMseCxULE4sQyxrLEwsQSxPLE0sXyxEO2lmKHR5cGVvZiBlIT1cIm9iamVjdFwiKXtpZih0aGlzLm9wdGlvbnMuZXJyb3IhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuZXJyb3I9PVwiZnVuY3Rpb25cIilyZXR1cm4gdGhpcy5vcHRpb25zLmVycm9yLmNhbGwodGhpcyxcIkludmFsaWQgSlNPTiBkYXRhXCIpLCExO3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgSlNPTiByZXNwb25zZVwiKX1pZihlLm1ldGEuY29kZSE9PTIwMCl7aWYodGhpcy5vcHRpb25zLmVycm9yIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmVycm9yPT1cImZ1bmN0aW9uXCIpcmV0dXJuIHRoaXMub3B0aW9ucy5lcnJvci5jYWxsKHRoaXMsZS5tZXRhLmVycm9yX21lc3NhZ2UpLCExO3Rocm93IG5ldyBFcnJvcihcIkVycm9yIGZyb20gSW5zdGFncmFtOiBcIitlLm1ldGEuZXJyb3JfbWVzc2FnZSl9aWYoZS5kYXRhLmxlbmd0aD09PTApe2lmKHRoaXMub3B0aW9ucy5lcnJvciE9bnVsbCYmdHlwZW9mIHRoaXMub3B0aW9ucy5lcnJvcj09XCJmdW5jdGlvblwiKXJldHVybiB0aGlzLm9wdGlvbnMuZXJyb3IuY2FsbCh0aGlzLFwiTm8gaW1hZ2VzIHdlcmUgcmV0dXJuZWQgZnJvbSBJbnN0YWdyYW1cIiksITE7dGhyb3cgbmV3IEVycm9yKFwiTm8gaW1hZ2VzIHdlcmUgcmV0dXJuZWQgZnJvbSBJbnN0YWdyYW1cIil9dGhpcy5vcHRpb25zLnN1Y2Nlc3MhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuc3VjY2Vzcz09XCJmdW5jdGlvblwiJiZ0aGlzLm9wdGlvbnMuc3VjY2Vzcy5jYWxsKHRoaXMsZSksdGhpcy5jb250ZXh0Lm5leHRVcmw9XCJcIixlLnBhZ2luYXRpb24hPW51bGwmJih0aGlzLmNvbnRleHQubmV4dFVybD1lLnBhZ2luYXRpb24ubmV4dF91cmwpO2lmKHRoaXMub3B0aW9ucy5zb3J0QnkhPT1cIm5vbmVcIil7dGhpcy5vcHRpb25zLnNvcnRCeT09PVwicmFuZG9tXCI/TT1bXCJcIixcInJhbmRvbVwiXTpNPXRoaXMub3B0aW9ucy5zb3J0Qnkuc3BsaXQoXCItXCIpLE89TVswXT09PVwibGVhc3RcIj8hMDohMTtzd2l0Y2goTVsxXSl7Y2FzZVwicmFuZG9tXCI6ZS5kYXRhLnNvcnQoZnVuY3Rpb24oKXtyZXR1cm4uNS1NYXRoLnJhbmRvbSgpfSk7YnJlYWs7Y2FzZVwicmVjZW50XCI6ZS5kYXRhPXRoaXMuX3NvcnRCeShlLmRhdGEsXCJjcmVhdGVkX3RpbWVcIixPKTticmVhaztjYXNlXCJsaWtlZFwiOmUuZGF0YT10aGlzLl9zb3J0QnkoZS5kYXRhLFwibGlrZXMuY291bnRcIixPKTticmVhaztjYXNlXCJjb21tZW50ZWRcIjplLmRhdGE9dGhpcy5fc29ydEJ5KGUuZGF0YSxcImNvbW1lbnRzLmNvdW50XCIsTyk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wdGlvbiBmb3Igc29ydEJ5OiAnXCIrdGhpcy5vcHRpb25zLnNvcnRCeStcIicuXCIpfX1pZih0eXBlb2YgZG9jdW1lbnQhPVwidW5kZWZpbmVkXCImJmRvY3VtZW50IT09bnVsbCYmdGhpcy5vcHRpb25zLm1vY2s9PT0hMSl7bT1lLmRhdGEsQT1wYXJzZUludCh0aGlzLm9wdGlvbnMubGltaXQsMTApLHRoaXMub3B0aW9ucy5saW1pdCE9bnVsbCYmbS5sZW5ndGg+QSYmKG09bS5zbGljZSgwLEEpKSx1PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSx0aGlzLm9wdGlvbnMuZmlsdGVyIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmZpbHRlcj09XCJmdW5jdGlvblwiJiYobT10aGlzLl9maWx0ZXIobSx0aGlzLm9wdGlvbnMuZmlsdGVyKSk7aWYodGhpcy5vcHRpb25zLnRlbXBsYXRlIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLnRlbXBsYXRlPT1cInN0cmluZ1wiKXtmPVwiXCIsZD1cIlwiLHc9XCJcIixEPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKGM9MCxOPW0ubGVuZ3RoO2M8TjtjKyspe2g9bVtjXSxwPWguaW1hZ2VzW3RoaXMub3B0aW9ucy5yZXNvbHV0aW9uXTtpZih0eXBlb2YgcCE9XCJvYmplY3RcIil0aHJvdyBvPVwiTm8gaW1hZ2UgZm91bmQgZm9yIHJlc29sdXRpb246IFwiK3RoaXMub3B0aW9ucy5yZXNvbHV0aW9uK1wiLlwiLG5ldyBFcnJvcihvKTtFPXAud2lkdGgseT1wLmhlaWdodCxiPVwic3F1YXJlXCIsRT55JiYoYj1cImxhbmRzY2FwZVwiKSxFPHkmJihiPVwicG9ydHJhaXRcIiksdj1wLnVybCxsPXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKFwiaHR0cFwiKT49MCxsJiYhdGhpcy5vcHRpb25zLnVzZUh0dHAmJih2PXYucmVwbGFjZSgvaHR0cHM/OlxcL1xcLy8sXCIvL1wiKSksZD10aGlzLl9tYWtlVGVtcGxhdGUodGhpcy5vcHRpb25zLnRlbXBsYXRlLHttb2RlbDpoLGlkOmguaWQsbGluazpoLmxpbmssdHlwZTpoLnR5cGUsaW1hZ2U6dix3aWR0aDpFLGhlaWdodDp5LG9yaWVudGF0aW9uOmIsY2FwdGlvbjp0aGlzLl9nZXRPYmplY3RQcm9wZXJ0eShoLFwiY2FwdGlvbi50ZXh0XCIpLGxpa2VzOmgubGlrZXMuY291bnQsY29tbWVudHM6aC5jb21tZW50cy5jb3VudCxsb2NhdGlvbjp0aGlzLl9nZXRPYmplY3RQcm9wZXJ0eShoLFwibG9jYXRpb24ubmFtZVwiKX0pLGYrPWR9RC5pbm5lckhUTUw9ZixpPVtdLHI9MCxuPUQuY2hpbGROb2Rlcy5sZW5ndGg7d2hpbGUocjxuKWkucHVzaChELmNoaWxkTm9kZXNbcl0pLHIrPTE7Zm9yKHg9MCxDPWkubGVuZ3RoO3g8Qzt4KyspTD1pW3hdLHUuYXBwZW5kQ2hpbGQoTCl9ZWxzZSBmb3IoVD0wLGs9bS5sZW5ndGg7VDxrO1QrKyl7aD1tW1RdLGc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKSxwPWguaW1hZ2VzW3RoaXMub3B0aW9ucy5yZXNvbHV0aW9uXTtpZih0eXBlb2YgcCE9XCJvYmplY3RcIil0aHJvdyBvPVwiTm8gaW1hZ2UgZm91bmQgZm9yIHJlc29sdXRpb246IFwiK3RoaXMub3B0aW9ucy5yZXNvbHV0aW9uK1wiLlwiLG5ldyBFcnJvcihvKTt2PXAudXJsLGw9d2luZG93LmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoXCJodHRwXCIpPj0wLGwmJiF0aGlzLm9wdGlvbnMudXNlSHR0cCYmKHY9di5yZXBsYWNlKC9odHRwcz86XFwvXFwvLyxcIi8vXCIpKSxnLnNyYz12LHRoaXMub3B0aW9ucy5saW5rcz09PSEwPyh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLHQuaHJlZj1oLmxpbmssdC5hcHBlbmRDaGlsZChnKSx1LmFwcGVuZENoaWxkKHQpKTp1LmFwcGVuZENoaWxkKGcpfV89dGhpcy5vcHRpb25zLnRhcmdldCx0eXBlb2YgXz09XCJzdHJpbmdcIiYmKF89ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXykpO2lmKF89PW51bGwpdGhyb3cgbz0nTm8gZWxlbWVudCB3aXRoIGlkPVwiJyt0aGlzLm9wdGlvbnMudGFyZ2V0KydcIiBvbiBwYWdlLicsbmV3IEVycm9yKG8pO18uYXBwZW5kQ2hpbGQodSksYT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0sYS5yZW1vdmVDaGlsZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluc3RhZmVlZC1mZXRjaGVyXCIpKSxTPVwiaW5zdGFmZWVkQ2FjaGVcIit0aGlzLnVuaXF1ZSx3aW5kb3dbU109dm9pZCAwO3RyeXtkZWxldGUgd2luZG93W1NdfWNhdGNoKFApe3M9UH19cmV0dXJuIHRoaXMub3B0aW9ucy5hZnRlciE9bnVsbCYmdHlwZW9mIHRoaXMub3B0aW9ucy5hZnRlcj09XCJmdW5jdGlvblwiJiZ0aGlzLm9wdGlvbnMuYWZ0ZXIuY2FsbCh0aGlzKSwhMH0sZS5wcm90b3R5cGUuX2J1aWxkVXJsPWZ1bmN0aW9uKCl7dmFyIGUsdCxuO2U9XCJodHRwczovL2FwaS5pbnN0YWdyYW0uY29tL3YxXCI7c3dpdGNoKHRoaXMub3B0aW9ucy5nZXQpe2Nhc2VcInBvcHVsYXJcIjp0PVwibWVkaWEvcG9wdWxhclwiO2JyZWFrO2Nhc2VcInRhZ2dlZFwiOmlmKCF0aGlzLm9wdGlvbnMudGFnTmFtZSl0aHJvdyBuZXcgRXJyb3IoXCJObyB0YWcgbmFtZSBzcGVjaWZpZWQuIFVzZSB0aGUgJ3RhZ05hbWUnIG9wdGlvbi5cIik7dD1cInRhZ3MvXCIrdGhpcy5vcHRpb25zLnRhZ05hbWUrXCIvbWVkaWEvcmVjZW50XCI7YnJlYWs7Y2FzZVwibG9jYXRpb25cIjppZighdGhpcy5vcHRpb25zLmxvY2F0aW9uSWQpdGhyb3cgbmV3IEVycm9yKFwiTm8gbG9jYXRpb24gc3BlY2lmaWVkLiBVc2UgdGhlICdsb2NhdGlvbklkJyBvcHRpb24uXCIpO3Q9XCJsb2NhdGlvbnMvXCIrdGhpcy5vcHRpb25zLmxvY2F0aW9uSWQrXCIvbWVkaWEvcmVjZW50XCI7YnJlYWs7Y2FzZVwidXNlclwiOmlmKCF0aGlzLm9wdGlvbnMudXNlcklkKXRocm93IG5ldyBFcnJvcihcIk5vIHVzZXIgc3BlY2lmaWVkLiBVc2UgdGhlICd1c2VySWQnIG9wdGlvbi5cIik7dD1cInVzZXJzL1wiK3RoaXMub3B0aW9ucy51c2VySWQrXCIvbWVkaWEvcmVjZW50XCI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wdGlvbiBmb3IgZ2V0OiAnXCIrdGhpcy5vcHRpb25zLmdldCtcIicuXCIpfXJldHVybiBuPWUrXCIvXCIrdCx0aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW4hPW51bGw/bis9XCI/YWNjZXNzX3Rva2VuPVwiK3RoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbjpuKz1cIj9jbGllbnRfaWQ9XCIrdGhpcy5vcHRpb25zLmNsaWVudElkLHRoaXMub3B0aW9ucy5saW1pdCE9bnVsbCYmKG4rPVwiJmNvdW50PVwiK3RoaXMub3B0aW9ucy5saW1pdCksbis9XCImY2FsbGJhY2s9aW5zdGFmZWVkQ2FjaGVcIit0aGlzLnVuaXF1ZStcIi5wYXJzZVwiLG59LGUucHJvdG90eXBlLl9nZW5LZXk9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gZT1mdW5jdGlvbigpe3JldHVybigoMStNYXRoLnJhbmRvbSgpKSo2NTUzNnwwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpfSxcIlwiK2UoKStlKCkrZSgpK2UoKX0sZS5wcm90b3R5cGUuX21ha2VUZW1wbGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxzLG87cj0vKD86XFx7ezJ9KShbXFx3XFxbXFxdXFwuXSspKD86XFx9ezJ9KS8sbj1lO3doaWxlKHIudGVzdChuKSlzPW4ubWF0Y2gocilbMV0sbz0oaT10aGlzLl9nZXRPYmplY3RQcm9wZXJ0eSh0LHMpKSE9bnVsbD9pOlwiXCIsbj1uLnJlcGxhY2UocixmdW5jdGlvbigpe3JldHVyblwiXCIrb30pO3JldHVybiBufSxlLnByb3RvdHlwZS5fZ2V0T2JqZWN0UHJvcGVydHk9ZnVuY3Rpb24oZSx0KXt2YXIgbixyO3Q9dC5yZXBsYWNlKC9cXFsoXFx3KylcXF0vZyxcIi4kMVwiKSxyPXQuc3BsaXQoXCIuXCIpO3doaWxlKHIubGVuZ3RoKXtuPXIuc2hpZnQoKTtpZighKGUhPW51bGwmJm4gaW4gZSkpcmV0dXJuIG51bGw7ZT1lW25dfXJldHVybiBlfSxlLnByb3RvdHlwZS5fc29ydEJ5PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtyZXR1cm4gcj1mdW5jdGlvbihlLHIpe3ZhciBpLHM7cmV0dXJuIGk9dGhpcy5fZ2V0T2JqZWN0UHJvcGVydHkoZSx0KSxzPXRoaXMuX2dldE9iamVjdFByb3BlcnR5KHIsdCksbj9pPnM/MTotMTppPHM/MTotMX0sZS5zb3J0KHIuYmluZCh0aGlzKSksZX0sZS5wcm90b3R5cGUuX2ZpbHRlcj1mdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxzLG87bj1bXSxyPWZ1bmN0aW9uKGUpe2lmKHQoZSkpcmV0dXJuIG4ucHVzaChlKX07Zm9yKGk9MCxvPWUubGVuZ3RoO2k8bztpKyspcz1lW2ldLHIocyk7cmV0dXJuIG59LGV9KCksZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHlwZW9mIGRlZmluZT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KTp0eXBlb2YgbW9kdWxlPT1cIm9iamVjdFwiJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10KCk6ZS5JbnN0YWZlZWQ9dCgpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGV9KX0pLmNhbGwodGhpcyk7Il19
