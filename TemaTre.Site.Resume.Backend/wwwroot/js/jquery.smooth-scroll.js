!function(t){function e(t){return t.replace(/(:|\.)/g,"\\$1")}var l="1.4.13",o={},n={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2,preventDefault:!0},s=function(e){var l=[],o=!1,n=e.dir&&"left"==e.dir?"scrollLeft":"scrollTop";return this.each(function(){if(this!=document&&this!=window){var e=t(this);e[n]()>0?l.push(this):(e[n](1),o=e[n]()>0,o&&l.push(this),e[n](0))}}),l.length||this.each(function(t){"BODY"===this.nodeName&&(l=[this])}),"first"===e.el&&l.length>1&&(l=[l[0]]),l};"ontouchend"in document;t.fn.extend({scrollable:function(t){var e=s.call(this,{dir:t});return this.pushStack(e)},firstScrollable:function(t){var e=s.call(this,{el:"first",dir:t});return this.pushStack(e)},smoothScroll:function(l,o){if(l=l||{},"options"===l)return o?this.each(function(){var e=t(this),l=t.extend(e.data("ssOpts")||{},o);t(this).data("ssOpts",l)}):this.first().data("ssOpts");var n=t.extend({},t.fn.smoothScroll.defaults,l),s=t.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",function(l){var o=this,r=t(this),i=t.extend({},n,r.data("ssOpts")||{}),c=n.exclude,a=i.excludeWithin,f=0,h=0,u=!0,d={},p=location.hostname===o.hostname||!o.hostname,m=i.scrollTarget||(t.smoothScroll.filterPath(o.pathname)||s)===s,S=e(o.hash);if(i.scrollTarget||p&&m&&S){for(;u&&f<c.length;)r.is(e(c[f++]))&&(u=!1);for(;u&&h<a.length;)r.closest(a[h++]).length&&(u=!1)}else u=!1;u&&(i.preventDefault&&l.preventDefault(),t.extend(d,i,{scrollTarget:i.scrollTarget||S,link:o}),t.smoothScroll(d))}),this}}),t.smoothScroll=function(e,l){if("options"===e&&"object"==typeof l)return t.extend(o,l);var n,s,r,i,c=0,a="offset",f="scrollTop",h={},u={};"number"==typeof e?(n=t.extend({link:null},t.fn.smoothScroll.defaults,o),r=e):(n=t.extend({link:null},t.fn.smoothScroll.defaults,e||{},o),n.scrollElement&&(a="position","static"==n.scrollElement.css("position")&&n.scrollElement.css("position","relative"))),f="left"==n.direction?"scrollLeft":f,n.scrollElement?(s=n.scrollElement,/^(?:HTML|BODY)$/.test(s[0].nodeName)||(c=s[f]())):s=t("html, body").firstScrollable(n.direction),n.beforeScroll.call(s,n),r="number"==typeof e?e:l||t(n.scrollTarget)[a]()&&t(n.scrollTarget)[a]()[n.direction]||0,h[f]=r+c+n.offset,i=n.speed,"auto"===i&&(i=h[f]||s.scrollTop(),i/=n.autoCoefficent),u={duration:i,easing:n.easing,complete:function(){n.afterScroll.call(n.link,n)}},n.step&&(u.step=n.step),s.length?s.stop().animate(h,u):n.afterScroll.call(n.link,n)},t.smoothScroll.version=l,t.smoothScroll.filterPath=function(t){return t.replace(/^\//,"").replace(/(?:index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},t.fn.smoothScroll.defaults=n}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5zbW9vdGgtc2Nyb2xsLmpzIl0sIm5hbWVzIjpbIiQiLCJlc2NhcGVTZWxlY3RvciIsInN0ciIsInJlcGxhY2UiLCJ2ZXJzaW9uIiwib3B0aW9uT3ZlcnJpZGVzIiwiZGVmYXVsdHMiLCJleGNsdWRlIiwiZXhjbHVkZVdpdGhpbiIsIm9mZnNldCIsImRpcmVjdGlvbiIsInNjcm9sbEVsZW1lbnQiLCJzY3JvbGxUYXJnZXQiLCJiZWZvcmVTY3JvbGwiLCJhZnRlclNjcm9sbCIsImVhc2luZyIsInNwZWVkIiwiYXV0b0NvZWZmaWNlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImdldFNjcm9sbGFibGUiLCJvcHRzIiwic2Nyb2xsYWJsZSIsInNjcm9sbGVkIiwiZGlyIiwidGhpcyIsImVhY2giLCJkb2N1bWVudCIsIndpbmRvdyIsImVsIiwicHVzaCIsImxlbmd0aCIsImluZGV4Iiwibm9kZU5hbWUiLCJmbiIsImV4dGVuZCIsInNjcmwiLCJjYWxsIiwicHVzaFN0YWNrIiwiZmlyc3RTY3JvbGxhYmxlIiwic21vb3RoU2Nyb2xsIiwib3B0aW9ucyIsImV4dHJhIiwiJHRoaXMiLCJkYXRhIiwiZmlyc3QiLCJsb2NhdGlvblBhdGgiLCJmaWx0ZXJQYXRoIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInVuYmluZCIsImJpbmQiLCJldmVudCIsImxpbmsiLCIkbGluayIsInRoaXNPcHRzIiwiZWxDb3VudGVyIiwiZXdsQ291bnRlciIsImluY2x1ZGUiLCJjbGlja09wdHMiLCJob3N0TWF0Y2giLCJob3N0bmFtZSIsInBhdGhNYXRjaCIsInRoaXNIYXNoIiwiaGFzaCIsImlzIiwiY2xvc2VzdCIsInB4IiwiJHNjcm9sbGVyIiwic2Nyb2xsVGFyZ2V0T2Zmc2V0Iiwic2Nyb2xsZXJPZmZzZXQiLCJvZmZQb3MiLCJzY3JvbGxEaXIiLCJhbmlQcm9wcyIsImFuaU9wdHMiLCJjc3MiLCJ0ZXN0Iiwic2Nyb2xsVG9wIiwiZHVyYXRpb24iLCJjb21wbGV0ZSIsInN0ZXAi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LEVBQUtYLE9BQ2pFTyxFQUFRSSxFQUFLSixNQUdDLFNBQVZBLElBR0ZBLEVBQVF3RCxFQUFTRCxJQUFjSixFQUFVUyxZQUd6QzVELEdBQWdCSSxFQUFLSCxnQkFHdkJ3RCxHQUNFSSxTQUFVN0QsRUFDVkQsT0FBUUssRUFBS0wsT0FDYitELFNBQVUsV0FDUjFELEVBQUtOLFlBQVlzQixLQUFLaEIsRUFBS2dDLEtBQU1oQyxLQUlqQ0EsRUFBSzJELE9BQ1BOLEVBQVFNLEtBQU8zRCxFQUFLMkQsTUFHbEJaLEVBQVVyQyxPQUNacUMsRUFBVWEsT0FBT0MsUUFBUVQsRUFBVUMsR0FFbkNyRCxFQUFLTixZQUFZc0IsS0FBS2hCLEVBQUtnQyxLQUFNaEMsSUFJckNwQixFQUFFdUMsYUFBYW5DLFFBQVVBLEVBQ3pCSixFQUFFdUMsYUFBYU8sV0FBYSxTQUFTb0MsR0FDbkMsTUFBT0EsR0FDSi9FLFFBQVEsTUFBTSxJQUNkQSxRQUFRLG1DQUFtQyxJQUMzQ0EsUUFBUSxNQUFNLEtBSW5CSCxFQUFFaUMsR0FBR00sYUFBYWpDLFNBQVdBLEdBTTFCNkUiLCJmaWxlIjoianF1ZXJ5LnNtb290aC1zY3JvbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcclxuICogU21vb3RoIFNjcm9sbCAtIHYxLjQuMTMgLSAyMDEzLTExLTAyXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9rc3dlZGJlcmcvanF1ZXJ5LXNtb290aC1zY3JvbGxcclxuICogQ29weXJpZ2h0IChjKSAyMDEzIEthcmwgU3dlZGJlcmdcclxuICogTGljZW5zZWQgTUlUIChodHRwczovL2dpdGh1Yi5jb20va3N3ZWRiZXJnL2pxdWVyeS1zbW9vdGgtc2Nyb2xsL2Jsb2IvbWFzdGVyL0xJQ0VOU0UtTUlUKVxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigkKSB7XHJcbnZhciB2ZXJzaW9uID0gJzEuNC4xMycsXHJcbiAgICBvcHRpb25PdmVycmlkZXMgPSB7fSxcclxuICAgIGRlZmF1bHRzID0ge1xyXG4gICAgICBleGNsdWRlOiBbXSxcclxuICAgICAgZXhjbHVkZVdpdGhpbjpbXSxcclxuICAgICAgb2Zmc2V0OiAwLFxyXG5cclxuICAgICAgLy8gb25lIG9mICd0b3AnIG9yICdsZWZ0J1xyXG4gICAgICBkaXJlY3Rpb246ICd0b3AnLFxyXG5cclxuICAgICAgLy8galF1ZXJ5IHNldCBvZiBlbGVtZW50cyB5b3Ugd2lzaCB0byBzY3JvbGwgKGZvciAkLnNtb290aFNjcm9sbCkuXHJcbiAgICAgIC8vICBpZiBudWxsIChkZWZhdWx0KSwgJCgnaHRtbCwgYm9keScpLmZpcnN0U2Nyb2xsYWJsZSgpIGlzIHVzZWQuXHJcbiAgICAgIHNjcm9sbEVsZW1lbnQ6IG51bGwsXHJcblxyXG4gICAgICAvLyBvbmx5IHVzZSBpZiB5b3Ugd2FudCB0byBvdmVycmlkZSBkZWZhdWx0IGJlaGF2aW9yXHJcbiAgICAgIHNjcm9sbFRhcmdldDogbnVsbCxcclxuXHJcbiAgICAgIC8vIGZuKG9wdHMpIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBiZWZvcmUgc2Nyb2xsaW5nIG9jY3Vycy5cclxuICAgICAgLy8gYHRoaXNgIGlzIHRoZSBlbGVtZW50KHMpIGJlaW5nIHNjcm9sbGVkXHJcbiAgICAgIGJlZm9yZVNjcm9sbDogZnVuY3Rpb24oKSB7fSxcclxuXHJcbiAgICAgIC8vIGZuKG9wdHMpIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhZnRlciBzY3JvbGxpbmcgb2NjdXJzLlxyXG4gICAgICAvLyBgdGhpc2AgaXMgdGhlIHRyaWdnZXJpbmcgZWxlbWVudFxyXG4gICAgICBhZnRlclNjcm9sbDogZnVuY3Rpb24oKSB7fSxcclxuICAgICAgZWFzaW5nOiAnc3dpbmcnLFxyXG4gICAgICBzcGVlZDogNDAwLFxyXG5cclxuICAgICAgLy8gY29lZmZpY2llbnQgZm9yIFwiYXV0b1wiIHNwZWVkXHJcbiAgICAgIGF1dG9Db2VmZmljZW50OiAyLFxyXG5cclxuICAgICAgLy8gJC5mbi5zbW9vdGhTY3JvbGwgb25seTogd2hldGhlciB0byBwcmV2ZW50IHRoZSBkZWZhdWx0IGNsaWNrIGFjdGlvblxyXG4gICAgICBwcmV2ZW50RGVmYXVsdDogdHJ1ZVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXRTY3JvbGxhYmxlID0gZnVuY3Rpb24ob3B0cykge1xyXG4gICAgICB2YXIgc2Nyb2xsYWJsZSA9IFtdLFxyXG4gICAgICAgICAgc2Nyb2xsZWQgPSBmYWxzZSxcclxuICAgICAgICAgIGRpciA9IG9wdHMuZGlyICYmIG9wdHMuZGlyID09ICdsZWZ0JyA/ICdzY3JvbGxMZWZ0JyA6ICdzY3JvbGxUb3AnO1xyXG5cclxuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcyA9PSBkb2N1bWVudCB8fCB0aGlzID09IHdpbmRvdykgeyByZXR1cm47IH1cclxuICAgICAgICB2YXIgZWwgPSAkKHRoaXMpO1xyXG4gICAgICAgIGlmICggZWxbZGlyXSgpID4gMCApIHtcclxuICAgICAgICAgIHNjcm9sbGFibGUucHVzaCh0aGlzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gaWYgc2Nyb2xsKFRvcHxMZWZ0KSA9PT0gMCwgbnVkZ2UgdGhlIGVsZW1lbnQgMXB4IGFuZCBzZWUgaWYgaXQgbW92ZXNcclxuICAgICAgICAgIGVsW2Rpcl0oMSk7XHJcbiAgICAgICAgICBzY3JvbGxlZCA9IGVsW2Rpcl0oKSA+IDA7XHJcbiAgICAgICAgICBpZiAoIHNjcm9sbGVkICkge1xyXG4gICAgICAgICAgICBzY3JvbGxhYmxlLnB1c2godGhpcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyB0aGVuIHB1dCBpdCBiYWNrLCBvZiBjb3Vyc2VcclxuICAgICAgICAgIGVsW2Rpcl0oMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIElmIG5vIHNjcm9sbGFibGUgZWxlbWVudHMsIGZhbGwgYmFjayB0byA8Ym9keT4sXHJcbiAgICAgIC8vIGlmIGl0J3MgaW4gdGhlIGpRdWVyeSBjb2xsZWN0aW9uXHJcbiAgICAgIC8vIChkb2luZyB0aGlzIGJlY2F1c2UgU2FmYXJpIHNldHMgc2Nyb2xsVG9wIGFzeW5jLFxyXG4gICAgICAvLyBzbyBjYW4ndCBzZXQgaXQgdG8gMSBhbmQgaW1tZWRpYXRlbHkgZ2V0IHRoZSB2YWx1ZS4pXHJcbiAgICAgIGlmICghc2Nyb2xsYWJsZS5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgIGlmICh0aGlzLm5vZGVOYW1lID09PSAnQk9EWScpIHtcclxuICAgICAgICAgICAgc2Nyb2xsYWJsZSA9IFt0aGlzXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVXNlIHRoZSBmaXJzdCBzY3JvbGxhYmxlIGVsZW1lbnQgaWYgd2UncmUgY2FsbGluZyBmaXJzdFNjcm9sbGFibGUoKVxyXG4gICAgICBpZiAoIG9wdHMuZWwgPT09ICdmaXJzdCcgJiYgc2Nyb2xsYWJsZS5sZW5ndGggPiAxICkge1xyXG4gICAgICAgIHNjcm9sbGFibGUgPSBbIHNjcm9sbGFibGVbMF0gXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHNjcm9sbGFibGU7XHJcbiAgICB9LFxyXG4gICAgaXNUb3VjaCA9ICdvbnRvdWNoZW5kJyBpbiBkb2N1bWVudDtcclxuXHJcbiQuZm4uZXh0ZW5kKHtcclxuICBzY3JvbGxhYmxlOiBmdW5jdGlvbihkaXIpIHtcclxuICAgIHZhciBzY3JsID0gZ2V0U2Nyb2xsYWJsZS5jYWxsKHRoaXMsIHtkaXI6IGRpcn0pO1xyXG4gICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKHNjcmwpO1xyXG4gIH0sXHJcbiAgZmlyc3RTY3JvbGxhYmxlOiBmdW5jdGlvbihkaXIpIHtcclxuICAgIHZhciBzY3JsID0gZ2V0U2Nyb2xsYWJsZS5jYWxsKHRoaXMsIHtlbDogJ2ZpcnN0JywgZGlyOiBkaXJ9KTtcclxuICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayhzY3JsKTtcclxuICB9LFxyXG5cclxuICBzbW9vdGhTY3JvbGw6IGZ1bmN0aW9uKG9wdGlvbnMsIGV4dHJhKSB7XHJcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICBpZiAoIG9wdGlvbnMgPT09ICdvcHRpb25zJyApIHtcclxuICAgICAgaWYgKCAhZXh0cmEgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3QoKS5kYXRhKCdzc09wdHMnKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgIG9wdHMgPSAkLmV4dGVuZCgkdGhpcy5kYXRhKCdzc09wdHMnKSB8fCB7fSwgZXh0cmEpO1xyXG5cclxuICAgICAgICAkKHRoaXMpLmRhdGEoJ3NzT3B0cycsIG9wdHMpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCAkLmZuLnNtb290aFNjcm9sbC5kZWZhdWx0cywgb3B0aW9ucyksXHJcbiAgICAgICAgbG9jYXRpb25QYXRoID0gJC5zbW9vdGhTY3JvbGwuZmlsdGVyUGF0aChsb2NhdGlvbi5wYXRobmFtZSk7XHJcblxyXG4gICAgdGhpc1xyXG4gICAgLnVuYmluZCgnY2xpY2suc21vb3Roc2Nyb2xsJylcclxuICAgIC5iaW5kKCdjbGljay5zbW9vdGhzY3JvbGwnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIgbGluayA9IHRoaXMsXHJcbiAgICAgICAgICAkbGluayA9ICQodGhpcyksXHJcbiAgICAgICAgICB0aGlzT3B0cyA9ICQuZXh0ZW5kKHt9LCBvcHRzLCAkbGluay5kYXRhKCdzc09wdHMnKSB8fCB7fSksXHJcbiAgICAgICAgICBleGNsdWRlID0gb3B0cy5leGNsdWRlLFxyXG4gICAgICAgICAgZXhjbHVkZVdpdGhpbiA9IHRoaXNPcHRzLmV4Y2x1ZGVXaXRoaW4sXHJcbiAgICAgICAgICBlbENvdW50ZXIgPSAwLCBld2xDb3VudGVyID0gMCxcclxuICAgICAgICAgIGluY2x1ZGUgPSB0cnVlLFxyXG4gICAgICAgICAgY2xpY2tPcHRzID0ge30sXHJcbiAgICAgICAgICBob3N0TWF0Y2ggPSAoKGxvY2F0aW9uLmhvc3RuYW1lID09PSBsaW5rLmhvc3RuYW1lKSB8fCAhbGluay5ob3N0bmFtZSksXHJcbiAgICAgICAgICBwYXRoTWF0Y2ggPSB0aGlzT3B0cy5zY3JvbGxUYXJnZXQgfHwgKCAkLnNtb290aFNjcm9sbC5maWx0ZXJQYXRoKGxpbmsucGF0aG5hbWUpIHx8IGxvY2F0aW9uUGF0aCApID09PSBsb2NhdGlvblBhdGgsXHJcbiAgICAgICAgICB0aGlzSGFzaCA9IGVzY2FwZVNlbGVjdG9yKGxpbmsuaGFzaCk7XHJcblxyXG4gICAgICBpZiAoICF0aGlzT3B0cy5zY3JvbGxUYXJnZXQgJiYgKCFob3N0TWF0Y2ggfHwgIXBhdGhNYXRjaCB8fCAhdGhpc0hhc2gpICkge1xyXG4gICAgICAgIGluY2x1ZGUgPSBmYWxzZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB3aGlsZSAoaW5jbHVkZSAmJiBlbENvdW50ZXIgPCBleGNsdWRlLmxlbmd0aCkge1xyXG4gICAgICAgICAgaWYgKCRsaW5rLmlzKGVzY2FwZVNlbGVjdG9yKGV4Y2x1ZGVbZWxDb3VudGVyKytdKSkpIHtcclxuICAgICAgICAgICAgaW5jbHVkZSA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAoIGluY2x1ZGUgJiYgZXdsQ291bnRlciA8IGV4Y2x1ZGVXaXRoaW4ubGVuZ3RoICkge1xyXG4gICAgICAgICAgaWYgKCRsaW5rLmNsb3Nlc3QoZXhjbHVkZVdpdGhpbltld2xDb3VudGVyKytdKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaW5jbHVkZSA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCBpbmNsdWRlICkge1xyXG5cclxuICAgICAgICBpZiAoIHRoaXNPcHRzLnByZXZlbnREZWZhdWx0ICkge1xyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuZXh0ZW5kKCBjbGlja09wdHMsIHRoaXNPcHRzLCB7XHJcbiAgICAgICAgICBzY3JvbGxUYXJnZXQ6IHRoaXNPcHRzLnNjcm9sbFRhcmdldCB8fCB0aGlzSGFzaCxcclxuICAgICAgICAgIGxpbms6IGxpbmtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkLnNtb290aFNjcm9sbCggY2xpY2tPcHRzICk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxufSk7XHJcblxyXG4kLnNtb290aFNjcm9sbCA9IGZ1bmN0aW9uKG9wdGlvbnMsIHB4KSB7XHJcbiAgaWYgKCBvcHRpb25zID09PSAnb3B0aW9ucycgJiYgdHlwZW9mIHB4ID09PSAnb2JqZWN0JyApIHtcclxuICAgIHJldHVybiAkLmV4dGVuZChvcHRpb25PdmVycmlkZXMsIHB4KTtcclxuICB9XHJcbiAgdmFyIG9wdHMsICRzY3JvbGxlciwgc2Nyb2xsVGFyZ2V0T2Zmc2V0LCBzcGVlZCxcclxuICAgICAgc2Nyb2xsZXJPZmZzZXQgPSAwLFxyXG4gICAgICBvZmZQb3MgPSAnb2Zmc2V0JyxcclxuICAgICAgc2Nyb2xsRGlyID0gJ3Njcm9sbFRvcCcsXHJcbiAgICAgIGFuaVByb3BzID0ge30sXHJcbiAgICAgIGFuaU9wdHMgPSB7fSxcclxuICAgICAgc2Nyb2xscHJvcHMgPSBbXTtcclxuXHJcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJykge1xyXG4gICAgb3B0cyA9ICQuZXh0ZW5kKHtsaW5rOiBudWxsfSwgJC5mbi5zbW9vdGhTY3JvbGwuZGVmYXVsdHMsIG9wdGlvbk92ZXJyaWRlcyk7XHJcbiAgICBzY3JvbGxUYXJnZXRPZmZzZXQgPSBvcHRpb25zO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBvcHRzID0gJC5leHRlbmQoe2xpbms6IG51bGx9LCAkLmZuLnNtb290aFNjcm9sbC5kZWZhdWx0cywgb3B0aW9ucyB8fCB7fSwgb3B0aW9uT3ZlcnJpZGVzKTtcclxuICAgIGlmIChvcHRzLnNjcm9sbEVsZW1lbnQpIHtcclxuICAgICAgb2ZmUG9zID0gJ3Bvc2l0aW9uJztcclxuICAgICAgaWYgKG9wdHMuc2Nyb2xsRWxlbWVudC5jc3MoJ3Bvc2l0aW9uJykgPT0gJ3N0YXRpYycpIHtcclxuICAgICAgICBvcHRzLnNjcm9sbEVsZW1lbnQuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzY3JvbGxEaXIgPSBvcHRzLmRpcmVjdGlvbiA9PSAnbGVmdCcgPyAnc2Nyb2xsTGVmdCcgOiBzY3JvbGxEaXI7XHJcblxyXG4gIGlmICggb3B0cy5zY3JvbGxFbGVtZW50ICkge1xyXG4gICAgJHNjcm9sbGVyID0gb3B0cy5zY3JvbGxFbGVtZW50O1xyXG4gICAgaWYgKCAhKC9eKD86SFRNTHxCT0RZKSQvKS50ZXN0KCRzY3JvbGxlclswXS5ub2RlTmFtZSkgKSB7XHJcbiAgICAgIHNjcm9sbGVyT2Zmc2V0ID0gJHNjcm9sbGVyW3Njcm9sbERpcl0oKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgJHNjcm9sbGVyID0gJCgnaHRtbCwgYm9keScpLmZpcnN0U2Nyb2xsYWJsZShvcHRzLmRpcmVjdGlvbik7XHJcbiAgfVxyXG5cclxuICAvLyBiZWZvcmVTY3JvbGwgY2FsbGJhY2sgZnVuY3Rpb24gbXVzdCBmaXJlIGJlZm9yZSBjYWxjdWxhdGluZyBvZmZzZXRcclxuICBvcHRzLmJlZm9yZVNjcm9sbC5jYWxsKCRzY3JvbGxlciwgb3B0cyk7XHJcblxyXG4gIHNjcm9sbFRhcmdldE9mZnNldCA9ICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ251bWJlcicpID8gb3B0aW9ucyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB4IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICggJChvcHRzLnNjcm9sbFRhcmdldClbb2ZmUG9zXSgpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQob3B0cy5zY3JvbGxUYXJnZXQpW29mZlBvc10oKVtvcHRzLmRpcmVjdGlvbl0gKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAwO1xyXG5cclxuICBhbmlQcm9wc1tzY3JvbGxEaXJdID0gc2Nyb2xsVGFyZ2V0T2Zmc2V0ICsgc2Nyb2xsZXJPZmZzZXQgKyBvcHRzLm9mZnNldDtcclxuICBzcGVlZCA9IG9wdHMuc3BlZWQ7XHJcblxyXG4gIC8vIGF1dG9tYXRpY2FsbHkgY2FsY3VsYXRlIHRoZSBzcGVlZCBvZiB0aGUgc2Nyb2xsIGJhc2VkIG9uIGRpc3RhbmNlIC8gY29lZmZpY2llbnRcclxuICBpZiAoc3BlZWQgPT09ICdhdXRvJykge1xyXG5cclxuICAgIC8vIGlmIGFuaVByb3BzW3Njcm9sbERpcl0gPT0gMCB0aGVuIHdlJ2xsIHVzZSBzY3JvbGxUb3AoKSB2YWx1ZSBpbnN0ZWFkXHJcbiAgICBzcGVlZCA9IGFuaVByb3BzW3Njcm9sbERpcl0gfHwgJHNjcm9sbGVyLnNjcm9sbFRvcCgpO1xyXG5cclxuICAgIC8vIGRpdmlkZSB0aGUgc3BlZWQgYnkgdGhlIGNvZWZmaWNpZW50XHJcbiAgICBzcGVlZCA9IHNwZWVkIC8gb3B0cy5hdXRvQ29lZmZpY2VudDtcclxuICB9XHJcblxyXG4gIGFuaU9wdHMgPSB7XHJcbiAgICBkdXJhdGlvbjogc3BlZWQsXHJcbiAgICBlYXNpbmc6IG9wdHMuZWFzaW5nLFxyXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBvcHRzLmFmdGVyU2Nyb2xsLmNhbGwob3B0cy5saW5rLCBvcHRzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBpZiAob3B0cy5zdGVwKSB7XHJcbiAgICBhbmlPcHRzLnN0ZXAgPSBvcHRzLnN0ZXA7XHJcbiAgfVxyXG5cclxuICBpZiAoJHNjcm9sbGVyLmxlbmd0aCkge1xyXG4gICAgJHNjcm9sbGVyLnN0b3AoKS5hbmltYXRlKGFuaVByb3BzLCBhbmlPcHRzKTtcclxuICB9IGVsc2Uge1xyXG4gICAgb3B0cy5hZnRlclNjcm9sbC5jYWxsKG9wdHMubGluaywgb3B0cyk7XHJcbiAgfVxyXG59O1xyXG5cclxuJC5zbW9vdGhTY3JvbGwudmVyc2lvbiA9IHZlcnNpb247XHJcbiQuc21vb3RoU2Nyb2xsLmZpbHRlclBhdGggPSBmdW5jdGlvbihzdHJpbmcpIHtcclxuICByZXR1cm4gc3RyaW5nXHJcbiAgICAucmVwbGFjZSgvXlxcLy8sJycpXHJcbiAgICAucmVwbGFjZSgvKD86aW5kZXh8ZGVmYXVsdCkuW2EtekEtWl17Myw0fSQvLCcnKVxyXG4gICAgLnJlcGxhY2UoL1xcLyQvLCcnKTtcclxufTtcclxuXHJcbi8vIGRlZmF1bHQgb3B0aW9uc1xyXG4kLmZuLnNtb290aFNjcm9sbC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xyXG5cclxuZnVuY3Rpb24gZXNjYXBlU2VsZWN0b3IgKHN0cikge1xyXG4gIHJldHVybiBzdHIucmVwbGFjZSgvKDp8XFwuKS9nLCdcXFxcJDEnKTtcclxufVxyXG5cclxufSkoalF1ZXJ5KTsiXX0=
